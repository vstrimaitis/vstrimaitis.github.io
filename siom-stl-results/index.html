<!doctype html>
<html>

<head>
    <meta charset="utf8">
	<title>Stacked Bar Chart</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.3/Chart.bundle.js"></script>
    <script src="data.js"></script>
	<style>
	canvas {
		-moz-user-select: none;
		-webkit-user-select: none;
		-ms-user-select: none;
	}
	</style>
</head>

<body>
	<div style="width: 100%">
		<canvas id="canvas"></canvas>
	</div>
	<script>
        window.onload = function() {
            fetchData().then(data => {
                var barChartData = buildChartData(data);
                console.log(barChartData);


                var ctx = document.getElementById('canvas').getContext('2d');
                //Chart.defaults.global.defaultFontFamily = "Consolas";
                window.myBar = new Chart(ctx, {
                    type: 'horizontalBar', // "line" for area chart
                    data: barChartData,
                    options: {
                        title: {
                            display: true,
                            text: 'ŠIOM "STL + Tips&Tricks" užsiėmimo apklausos rezultatai ('+data.answerCount+' atsakymų)',
                            fontSize: 30
                        },
                        tooltips: {
                            mode: 'index',
                            intersect: false,
                            enabled: true
                        },
                        responsive: true,
                        scales: {
                            xAxes: [{
                                stacked: true,
                            }],
                            yAxes: [{
                                stacked: true
                            }]
                        }
                    }
                });
            });
        };
	</script>
</body>

</html>